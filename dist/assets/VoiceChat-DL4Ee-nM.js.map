{"version":3,"file":"VoiceChat-DL4Ee-nM.js","sources":["../../src/components/VoiceChat.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useConversation } from '@elevenlabs/react';\nimport { X, Mic, Phone } from 'lucide-react';\n\ninterface VoiceChatProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport function VoiceChat({ isOpen, onClose }: VoiceChatProps) {\n  const { status, isSpeaking, startSession, endSession } = useConversation({\n    agentId: 'agent_0701k72hgm7se1gvm1db45vg23r1',\n  });\n\n  const [displayStatus, setDisplayStatus] = useState<'idle' | 'connecting' | 'connected' | 'speaking' | 'listening' | 'error'>(\n    'idle'\n  );\n\n  useEffect(() => {\n    if (!isOpen) {\n      if (status === 'connected') {\n        endSession();\n      }\n      setDisplayStatus('idle');\n    } else {\n      // Auto-start conversation when modal opens\n      if (status === 'disconnected') {\n        startSession({\n          agentId: 'agent_0701k72hgm7se1gvm1db45vg23r1',\n          connectionType: 'websocket',\n        });\n      }\n    }\n  }, [isOpen, status, startSession, endSession]);\n\n  // Update display status based on actual status and speaking state\n  useEffect(() => {\n    if (status === 'connecting') {\n      setDisplayStatus('connecting');\n    } else if (status === 'connected') {\n      if (isSpeaking) {\n        setDisplayStatus('speaking');\n      } else {\n        setDisplayStatus('listening');\n      }\n    } else {\n      setDisplayStatus('idle');\n    }\n  }, [status, isSpeaking]);\n\n  const handleEndCall = () => {\n    endSession();\n    onClose();\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-off-white border-3 border-charcoal shadow-brutal-chat rounded-sm w-full max-w-sm max-h-[600px] flex flex-col overflow-hidden\">\n        {/* Header */}\n        <div className=\"bg-warm-beige border-b-3 border-charcoal p-4 flex items-center justify-between\">\n          <div>\n            <h3 className=\"font-black text-xl uppercase\">Voice Demo</h3>\n            <p className=\"text-xs text-charcoal\">\n              {displayStatus === 'idle' && 'Ready to start'}\n              {displayStatus === 'connecting' && 'Connecting...'}\n              {displayStatus === 'connected' && 'Connected'}\n              {displayStatus === 'speaking' && 'Agent Speaking'}\n              {displayStatus === 'listening' && 'Listening...'}\n              {displayStatus === 'error' && 'Connection Error'}\n            </p>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"w-8 h-8 flex items-center justify-center hover:bg-charcoal hover:text-off-white transition-colors rounded-sm border-2 border-charcoal\"\n            aria-label=\"Close\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        {/* Main Content */}\n        <div className=\"flex-1 flex flex-col items-center justify-center p-6 space-y-6\">\n          {/* Status Indicator */}\n          <div className=\"flex flex-col items-center space-y-4\">\n            {/* Animated Microphone Indicator */}\n            <div className=\"relative w-24 h-24 flex items-center justify-center\">\n              {/* Background circles for animation */}\n              {displayStatus === 'speaking' && (\n                <>\n                  <div className=\"absolute inset-0 border-3 border-terracotta rounded-full animate-pulse\" />\n                  <div\n                    className=\"absolute inset-2 border-3 border-terracotta rounded-full animate-pulse\"\n                    style={{ animationDelay: '0.2s' }}\n                  />\n                </>\n              )}\n              {displayStatus === 'listening' && (\n                <>\n                  <div className=\"absolute inset-0 border-3 border-soft-sage rounded-full animate-pulse\" />\n                  <div\n                    className=\"absolute inset-2 border-3 border-soft-sage rounded-full animate-pulse\"\n                    style={{ animationDelay: '0.2s' }}\n                  />\n                </>\n              )}\n\n              {/* Center Circle */}\n              <div\n                className={`relative z-10 w-16 h-16 rounded-full border-3 border-charcoal flex items-center justify-center ${\n                  displayStatus === 'speaking'\n                    ? 'bg-terracotta'\n                    : displayStatus === 'listening'\n                    ? 'bg-soft-sage'\n                    : displayStatus === 'connecting'\n                    ? 'bg-muted-taupe'\n                    : displayStatus === 'error'\n                    ? 'bg-peach'\n                    : 'bg-warm-beige'\n                }`}\n              >\n                {displayStatus === 'error' ? (\n                  <span className=\"text-2xl font-black\">!</span>\n                ) : (\n                  <Mic className=\"w-8 h-8 text-charcoal\" />\n                )}\n              </div>\n            </div>\n\n            {/* Status Text */}\n            <div className=\"text-center\">\n              <p className=\"font-black text-charcoal uppercase text-sm\">\n                {displayStatus === 'idle' && 'Ready'}\n                {displayStatus === 'connecting' && 'Connecting...'}\n                {displayStatus === 'connected' && 'Connected - Speak Now'}\n                {displayStatus === 'speaking' && 'Agent Speaking'}\n                {displayStatus === 'listening' && 'Listening to You'}\n                {displayStatus === 'error' && 'Connection Error'}\n              </p>\n              <p className=\"text-xs text-charcoal mt-1\">\n                {displayStatus === 'listening' && 'Your microphone is active'}\n                {displayStatus === 'speaking' && 'The agent is speaking'}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* Controls */}\n        <div className=\"border-t-3 border-charcoal bg-off-white p-4 flex gap-3\">\n          {/* End Call Button */}\n          <button\n            onClick={handleEndCall}\n            className=\"w-full bg-peach text-charcoal px-4 py-3 border-3 border-charcoal shadow-brutal-xs font-black uppercase text-sm hover:-translate-x-[1px] hover:-translate-y-[1px] hover:shadow-brutal-sm transition-all duration-200 flex items-center justify-center gap-2 rounded-sm\"\n          >\n            <Phone className=\"w-4 h-4\" />\n            <span>End Call</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["VoiceChat","isOpen","onClose","status","isSpeaking","startSession","endSession","useConversation","agentId","displayStatus","setDisplayStatus","useState","useEffect","connectionType","className","children","jsxs","jsx","jsxRuntimeExports","onClick","X","Fragment","style","animationDelay","Mic","Phone"],"mappings":"mMASO,SAASA,GAAUC,OAAEA,EAAQC,QAAAA,IAClC,MAAMC,OAAEA,EAAQC,WAAAA,EAAAC,aAAYA,EAAcC,WAAAA,GAAeC,EAAgB,CACvEC,QAAS,wCAGJC,EAAeC,GAAoBC,EAAAA,SACxC,QAGFC,EAAAA,UAAU,KACHX,EAOY,iBAAXE,GACWE,EAAA,CACXG,QAAS,qCACTK,eAAgB,eATL,cAAXV,OAGJO,EAAiB,UAUlB,CAACT,EAAQE,EAAQE,EAAcC,IAGlCM,EAAAA,UAAU,KAENF,EADa,eAAXP,EACe,aACG,cAAXA,EACLC,EACe,WAEA,YAGF,SAElB,CAACD,EAAQC,IAOR,OAACH,QAGF,MAAI,CAAAa,UAAU,sEACbC,SAACC,EAAAA,KAAA,MAAA,CAAIF,UAAU,kIAEbC,SAAA,GAACC,KAAA,MAAA,CAAIF,UAAU,iFACbC,SAAA,QAAC,MACC,CAAAA,SAAA,CAACE,EAAAA,IAAA,KAAA,CAAGH,UAAU,+BAA+BC,SAAU,iBACvDC,KAAC,IAAE,CAAAF,UAAU,wBACVC,SAAA,CAAkB,SAAlBN,GAA4B,iBACV,eAAlBA,GAAkC,gBAChB,cAAlBA,GAAiC,YACf,aAAlBA,GAAgC,iBACd,cAAlBA,GAAiC,eACf,UAAlBA,GAA6B,yBAGlCS,EAAAD,IAAC,SAAA,CACCE,QAASjB,EACTY,UAAU,wIACV,aAAW,QAEXC,SAAAE,EAAAA,IAACG,EAAE,CAAAN,UAAU,uBAKhB,MAAI,CAAAA,UAAU,iEAEbC,SAACC,EAAAA,KAAA,MAAA,CAAIF,UAAU,uCAEbC,SAAA,GAACC,KAAA,MAAA,CAAIF,UAAU,sDAEZC,SAAA,CAAkB,aAAlBN,GAEGO,EAAAA,KAAAK,EAAAA,SAAA,CAAAN,SAAA,GAACE,IAAA,MAAA,CAAIH,UAAU,2EACfI,EAAAD,IAAC,MAAA,CACCH,UAAU,yEACVQ,MAAO,CAAEC,eAAgB,aAIZ,cAAlBd,GAEGO,EAAAA,KAAAK,EAAAA,SAAA,CAAAN,SAAA,GAACE,IAAA,MAAA,CAAIH,UAAU,0EACfI,EAAAD,IAAC,MAAA,CACCH,UAAU,wEACVQ,MAAO,CAAEC,eAAgB,aAM/BL,EAAAD,IAAC,MAAA,CACCH,UAAW,mGACS,aAAlBL,EACI,gBACkB,cAAlBA,EACA,eACkB,eAAlBA,EACA,iBACkB,UAAlBA,EACA,WACA,iBAGLM,SAAkB,UAAlBN,IACCQ,IAAC,OAAK,CAAAH,UAAU,sBAAsBC,SAAA,MAEtCG,EAAAD,IAACO,EAAI,CAAAV,UAAU,iCAMrBE,KAAC,MAAI,CAAAF,UAAU,cACbC,SAAA,GAACC,KAAA,IAAA,CAAEF,UAAU,6CACVC,SAAA,CAAkB,SAAlBN,GAA4B,QACV,eAAlBA,GAAkC,gBAChB,cAAlBA,GAAiC,wBACf,aAAlBA,GAAgC,iBACd,cAAlBA,GAAiC,mBACf,UAAlBA,GAA6B,wBAEhCO,KAAC,IAAE,CAAAF,UAAU,6BACVC,SAAA,CAAkB,cAAlBN,GAAiC,4BACf,aAAlBA,GAAgC,qCAOzCQ,IAAC,MAAI,CAAAH,UAAU,yDAEbC,SAAAG,EAAAF,KAAC,SAAA,CACCG,QAtGY,cAuGZL,UAAU,wQAEVC,SAAA,GAACE,IAAAQ,EAAA,CAAMX,UAAU,cACjBG,IAAC,QAAKF,SAAQ,uBArGJ,IA2GtB"}